"use strict";exports.id=284,exports.ids=[284],exports.modules={1106:(a,b,c)=>{c.d(b,{Kj:()=>g,mJ:()=>k,ok:()=>l,b6:()=>e});var d=c(51103);let e=({service:a,fetch:b=fetch})=>async(c,d)=>{let e=new URL(c,a);return await b(e.href,d)},f=/\bapplication\/json\b/;class g{handler;proxy;constructor({handler:a,proxy:b=null}){this.handler=(a=>"object"==typeof a?a.handle.bind(a):a)(a),this.proxy=b}clone({handler:a=this.handler,proxy:b=this.proxy}={}){return new g({handler:a,proxy:b})}get(a,b={}){return this.#a("get",a,b)}post(a,b={}){return this.#a("post",a,b)}async call(a,b={}){if(!d.SN)return;if("mainSchema"in a&&(a=a.mainSchema),null!==a.params){let c=d.xL(a.params,b.params);if(!c.ok)throw new n("params",c)}if("xrpc_procedure"===a.type&&a.input?.type==="lex"){let c=d.xL(a.input.schema,b.input);if(!c.ok)throw new n("input",c)}let c="xrpc_query"===a.type;if(void 0===b.as&&a.output?.type==="blob")throw TypeError("`as` option is required for endpoints returning blobs");let e=void 0!==b.as?b.as:a.output?.type==="lex"?"json":null,f=await this.#a(c?"get":"post",a.nsid,{params:b.params,input:c?void 0:b.input,as:e,signal:b.signal,headers:b.headers});if("json"===e&&f.ok&&a.output?.type==="lex"){let b=d.xL(a.output.schema,f.data);if(!b.ok)throw new n("output",b);return{ok:!0,status:f.status,headers:f.headers,data:b.value}}return f}async #a(a,b,{signal:c,as:d="json",headers:e,input:g,params:l}){let m=g&&(g instanceof Blob||ArrayBuffer.isView(g)||g instanceof ArrayBuffer||g instanceof ReadableStream),n=`/xrpc/${b}`+h(l),o=await this.handler(n,{method:a,signal:c,body:g&&!m?JSON.stringify(g):g,headers:j(e,{"content-type":g&&!m?"application/json":null,"atproto-proxy":i(this.proxy)}),duplex:g instanceof ReadableStream?"half":void 0});{let a=o.status,b=o.headers,c=b.get("content-type");if(200!==a){let d;if(null!=c&&f.test(c))try{let a=await o.json();k(a)&&(d=a)}catch{}else await o.body?.cancel();return{ok:!1,status:a,headers:b,data:d??{error:"UnknownXRPCError",message:`Request failed with status code ${a}`}}}{let e;switch(d){case"json":if(null!=c&&f.test(c))e=await o.json();else throw await o.body?.cancel(),TypeError(`Invalid response content-type (got ${c})`);break;case null:e=null,await o.body?.cancel();break;case"blob":e=await o.blob();break;case"bytes":e=new Uint8Array(await o.arrayBuffer());break;case"stream":e=o.body}return{ok:!0,status:a,headers:b,data:e}}}}}let h=a=>{let b;for(let c in a){let d=a[c];if(void 0!==d)if(b??=new URLSearchParams,Array.isArray(d))for(let a=0,e=d.length;a<e;a++){let e=d[a];b.append(c,""+e)}else b.set(c,""+d)}return b?"?"+b.toString():""},i=a=>null!=a?`${a.did}${a.serviceId}`:null,j=(a,b)=>{let c;for(let d in b){let e=b[d];null!==e&&((c??=new Headers(a)).has(d)||c.set(d,e))}return c??a},k=a=>{if("object"!=typeof a||null==a)return!1;let b=typeof a.error,c=typeof a.message;return"string"===b&&("undefined"===c||"string"===c)},l=a=>{if(a instanceof Promise)return a.then(l);if(a.ok)return a.data;throw new m(a)};class m extends Error{error;description;status;headers;constructor({status:a,headers:b=new Headers,data:c}){super(`${c.error} > ${c.message??"(unspecified description)"}`),this.name="ClientResponseError",this.error=c.error,this.description=c.message,this.status=a,this.headers=b}}class n extends Error{target;result;constructor(a,b){super(`validation failed for ${a}: ${b.message}`),this.name="ClientValidationError",this.target=a,this.result=b}}},14395:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.applyDefaultMiddleware=b.accessorMiddleware=b.strictProxyMiddleware=void 0,b.strictProxyMiddleware=function(a,b,c){void 0===c&&(c={});var d=c.extraInspectables,e=void 0===d?[]:d,f=["length","inspect","hasOwnProperty","toJSON",Symbol.toStringTag,Symbol.iterator,"asymmetricMatch","nodeType","$$typeof","then","__esModule"],g=["Symbol(util.inspect.custom)","Symbol(nodejs.util.inspect.custom)"];return new Proxy(a,{get:function(a,c){var d;if(f.includes(c)||g.includes(c.toString())||e.includes(c))return a[c];if(!Object.hasOwn(a,c)){if("object"==typeof b&&(null==(d=null==b?void 0:b.hasOwnProperty)?void 0:d.call(b,c)))throw ReferenceError("[envalid] Env var ".concat(c," was accessed but not validated. This var is set in the environment; please add an envalid validator for it."));throw ReferenceError("[envalid] Env var not found: ".concat(c))}return a[c]},set:function(a,b){throw TypeError("[envalid] Attempt to mutate environment value: ".concat(b))}})},b.accessorMiddleware=function(a,b){var c=a.NODE_ENV||b.NODE_ENV,d=!c||"production"===c;return Object.defineProperties(a,{isDevelopment:{value:"development"===c},isDev:{value:"development"===c},isProduction:{value:d},isProd:{value:d},isTest:{value:"test"===c}}),a},b.applyDefaultMiddleware=function(a,c){return(0,b.strictProxyMiddleware)((0,b.accessorMiddleware)(a,c),c)}},19610:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.defaultReporter=b.envalidErrorFormatter=void 0;var d,e=c(64324),f=console.error.bind(console),g=!!("object"==typeof process&&(null==(d=null==process?void 0:process.versions)?void 0:d.node)),h=function(a){return function(b){return g?"\x1b[".concat(a,"m").concat(b,"\x1b[0m"):b}},i={blue:h("34"),white:h("37"),yellow:h("33")},j=i.white("================================");b.envalidErrorFormatter=function(a,b){void 0===b&&(b=f);for(var c=[],d=[],g=0,h=Object.entries(a);g<h.length;g++){var k=h[g],l=k[0],m=k[1];m instanceof e.EnvMissingError?c.push("    ".concat(i.blue(l),": ").concat(m.message||"(required)")):d.push("    ".concat(i.blue(l),": ").concat((null==m?void 0:m.message)||"(invalid format)"))}d.length&&d.unshift(" ".concat(i.yellow("Invalid")," environment variables:")),c.length&&c.unshift(" ".concat(i.yellow("Missing")," environment variables:")),b([j,d.sort().join("\n"),c.sort().join("\n"),j].filter(function(a){return!!a}).join("\n"))},b.defaultReporter=function(a,c){var d=a.errors,e=void 0===d?{}:d,h=void 0===c?{logger:f}:c,j=h.onError,k=h.logger;if(Object.keys(e).length)if((0,b.envalidErrorFormatter)(e,k),j)j(e);else if(g)k(i.yellow("\n Exiting with error code 1")),process.exit(1);else throw TypeError("Environment validation failed")}},22148:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.testOnly=b.customCleanEnv=b.cleanEnv=void 0;var d=c(69412),e=c(14395);b.cleanEnv=function(a,b,c){void 0===c&&(c={});var f=(0,d.getSanitizedEnv)(a,b,c);return Object.freeze((0,e.applyDefaultMiddleware)(f,a))},b.customCleanEnv=function(a,b,c,e){return void 0===e&&(e={}),Object.freeze(c((0,d.getSanitizedEnv)(a,b,e),a))},b.testOnly=function(a){return d.testOnlySymbol}},51103:(a,b,c)=>{c.d(b,{eC:()=>af,YO:()=>aA,O9:()=>aB,av:()=>at,zM:()=>Y,ee:()=>aw,SZ:()=>ah,AU:()=>U,nn:()=>ai,fS:()=>aj,pm:()=>ao,MI:()=>ak,nd:()=>_,As:()=>aa,is:()=>Q,r:()=>al,eu:()=>V,it:()=>am,Ik:()=>aF,lq:()=>ax,gE:()=>aN,P:()=>aO,g1:()=>aG,u6:()=>ag,xL:()=>R,Yj:()=>ad,M4:()=>aq,OE:()=>ap,V1:()=>an,L5:()=>aM,Ox:()=>aJ,SN:()=>F});var d=c(4573);c(77598),d.Buffer.alloc,d.Buffer.allocUnsafe,d.Buffer.concat,d.Buffer.from;let e=d.Buffer.byteLength;d.Buffer.prototype.compare,d.Buffer.prototype.equals,d.Buffer.prototype.utf8Slice,d.Buffer.prototype.utf8Write;let f=a=>e(a,"utf8"),g=new Intl.Segmenter,h=/^did:([a-z]+):([a-zA-Z0-9._:%-]*[a-zA-Z0-9._-])$/,i=a=>"string"==typeof a&&a.length>=7&&a.length<=2048&&h.test(a),j=/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?$/,k=a=>"string"==typeof a&&a.length>=3&&a.length<=253&&j.test(a),l=a=>i(a)||k(a),m=/^[a-zA-Z](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+\.[a-zA-Z][a-zA-Z0-9]{0,62}?$/,n=a=>"string"==typeof a&&a.length>=5&&a.length<=317&&m.test(a),o=/^(?!\.{1,2}$)[a-zA-Z0-9_~.:-]{1,512}$/,p=/^at:\/\/([a-zA-Z0-9._:%-]+)(?:\/([a-zA-Z0-9-.]+)(?:\/([a-zA-Z0-9._~:@!$&%')(*+,;=-]+))?)?(?:#(\/[a-zA-Z0-9._~:@!$&%')(*+,;=\-[\]/\\]*))?$/,q=/^baf[ky]re(?:aa|i[a-z2-7]{52})$/,r=a=>{if("string"!=typeof a)return!1;let b=a.length;return(8===b||59===b)&&q.test(a)},s=/^((?!0{3})\d{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12]\d|3[01]))T((?:[01]\d|2[0-3]):(?:[0-5]\d):(?:[0-5]\d))(\.\d+)?(Z|(?!-00:00)[+-](?:[01]\d|2[0-3]):(?:[0-5]\d))$/,t=/^((?<grandfathered>(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))|((?<language>([A-Za-z]{2,3}(-(?<extlang>[A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-(?<script>[A-Za-z]{4}))?(-(?<region>[A-Za-z]{2}|[0-9]{3}))?(-(?<variant>[A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-(?<extension>[0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(?<privateUseA>x(-[A-Za-z0-9]{1,8})+))?)|(?<privateUseB>x(-[A-Za-z0-9]{1,8})+))$/,u=/^[234567abcdefghij][234567abcdefghijklmnopqrstuvwxyz]{12}$/,v=/^\w+:(?:\/\/)?[^\s/][^\s]*$/,w=Symbol.for("@atcute/cid-link-wrapper"),x=Symbol.for("@atcute/bytes-wrapper"),y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}(?:==)?|[A-Za-z0-9+/]{3}=?)?$/,z=(a,b)=>{if(!a)throw Error("Assertion failed")},A=(a,b,c)=>(Object.defineProperty(a,b,{value:c}),c),B=a=>({get value(){return A(this,"value",a())}}),C=Array.isArray,D=a=>"object"==typeof a&&null!==a&&!C(a),E=B(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch{return!1}}),F=!1,G=(a,b)=>a?{ok:!1,code:"join",left:a,right:b}:b,H=(a,b)=>({ok:!1,code:"prepend",key:a,tree:b}),I=a=>({ok:!0,value:a}),J=(a,b)=>{let{ok:c,msg:d,...e}=a;return{...e,path:b}},K=(a,b=[],c=[])=>{for(;;)switch(a.code){case"join":K(a.left,b.slice(),c),a=a.right;continue;case"prepend":b.push(a.key),a=a.tree;continue;default:return c.push(J(a,b)),c}},L=a=>{let b=0;for(;;)switch(a.code){case"join":b+=L(a.left),a=a.right;continue;case"prepend":a=a.tree;continue;default:return b+1}},M=(a,b,c,d)=>{let e=`expected ${a} `;return c>0?d===c?e+=`${c}`:d!==1/0?e+=`between ${c} and ${d}`:e+=`at least ${c}`:e+=`at most ${d}`,e+=` ${b}(s)`},N=a=>{let b="",c=0;for(;;){switch(a.code){case"join":c+=L(a.right),a=a.left;continue;case"prepend":b+=`.${a.key}`,a=a.tree;continue}break}let d=a.msg(),e=`${a.code} at ${b||"."} (${d})`;return c>0&&(e+=` (+${c} other issue(s))`),e};class O extends Error{name="ValidationError";#b;constructor(a){super(),this.#b=a}get message(){return N(this.#b)}get issues(){return K(this.#b)}}class P{ok=!1;#b;constructor(a){this.#b=a}get message(){return N(this.#b)}get issues(){return K(this.#b)}throw(){throw new O(this.#b)}}let Q=(a,b)=>{let c=a["~run"](b,1);return void 0===c||c.ok},R=(a,b)=>{let c=a["~run"](b,0);return void 0===c?I(b):c.ok?c:new P(c)},S=(a,b=[],c=[])=>{for(;;)switch(a.code){case"join":S(a.left,b.slice(),c),a=a.right;continue;case"prepend":b.push(a.key),a=a.tree;continue;default:return c.push({message:a.msg(),path:b.length>0?b:void 0}),c}},T=a=>({version:1,vendor:"@atcute/lexicons",validate(b){let c=a["~run"](b,0);return void 0===c?{value:b}:c.ok?{value:c.value}:{issues:S(c)}}}),U=(a,b)=>{let c=b.length;return{...a,constraints:b,"~run"(d,e){let f,g=a["~run"](d,e);if(void 0===g)f=d;else{if(!g.ok)return g;f=g.value}for(let a=0;a<c;a++){let c=b[a]["~run"](f,e);if(void 0!==c)if(c.ok)f=c.value,(void 0===g||g.ok)&&(g=c);else{if(1&e)return c;g=void 0===g||g.ok?c:G(g,c)}}return g}}},V=a=>{let b={ok:!1,code:"invalid_literal",expected:[a],msg:()=>`expected ${JSON.stringify(a)}`};return{kind:"schema",type:"literal",expected:a,"~run"(c,d){if(c!==a)return b},get"~standard"(){return A(this,"~standard",T(this))}}},W={ok:!1,code:"invalid_type",expected:"boolean",msg:()=>"expected boolean"},X={kind:"schema",type:"boolean","~run"(a,b){if("boolean"!=typeof a)return W},get"~standard"(){return A(this,"~standard",T(this))}},Y=()=>X,Z={ok:!1,code:"invalid_type",expected:"integer",msg:()=>"expected integer"},$={kind:"schema",type:"integer","~run"(a,b){if("number"!=typeof a||a<0||!Number.isSafeInteger(a))return Z},get"~standard"(){return A(this,"~standard",T(this))}},_=()=>$,aa=(a,b=1/0)=>{let c={ok:!1,code:"invalid_integer_range",min:a,max:b,msg(){let c="expected an integer ";return a>0?b===a?c+=`of exactly ${a}`:b!==1/0?c+=`between ${a} and ${b}`:c+=`of at least ${a}`:c+=`of at most ${b}`,c}};return{kind:"constraint",type:"integer_range",min:a,max:b,"~run"(d,e){if(d<a||d>b)return c}}},ab={ok:!1,code:"invalid_type",expected:"string",msg:()=>"expected string"},ac={kind:"schema",type:"string",format:null,"~run"(a,b){if("string"!=typeof a)return ab},get"~standard"(){return A(this,"~standard",T(this))}},ad=()=>ac,ae=(a,b)=>{let c={ok:!1,code:"invalid_string_format",expected:a,msg:()=>`expected a ${a} formatted string`},d={kind:"schema",type:"string",format:a,"~run":(a,d)=>"string"!=typeof a?ab:b(a)?void 0:c,get"~standard"(){return A(this,"~standard",T(this))}};return()=>d},af=ae("at-identifier",l),ag=ae("at-uri",a=>{if("string"!=typeof a)return!1;let b=p.exec(a);if(null===b)return!1;let[,c,d,e]=b;return l(c)&&(void 0===d||n(d))&&(void 0===e||(a=>"string"==typeof a&&a.length>=1&&a.length<=512&&o.test(a))(e))}),ah=ae("cid",r),ai=ae("datetime",a=>"string"==typeof a&&a.length>=20&&a.length<=64&&s.test(a)),aj=ae("did",i),ak=ae("handle",k),al=ae("language",a=>"string"==typeof a&&a.length>=2&&t.test(a)),am=ae("nsid",n),an=ae("tid",a=>"string"==typeof a&&13===a.length&&u.test(a)),ao=ae("uri",a=>{if("string"!=typeof a)return!1;let b=a.length,c=3*b;if(c<3)return!1;if(b>=3&&c<=8192)return v.test(a);let d=f(a);return!(d<3)&&!(d>8192)&&v.test(a)}),ap=(a,b=1/0)=>{let c={ok:!1,code:"invalid_string_length",minLength:a,maxLength:b,msg:()=>M("a string","character",a,b)};return{kind:"constraint",type:"string_length",minLength:a,maxLength:b,"~run"(d,e){let g=d.length,h=3*g;if(h<a)return c;if(g>=a&&h<=b)return;let i=f(d);if(i<a||i>b)return c}}},aq=(a,b=1/0)=>{let c={ok:!1,code:"invalid_string_graphemes",minGraphemes:a,maxGraphemes:b,msg:()=>M("a string","grapheme",a,b)};return{kind:"constraint",type:"string_graphemes",minGraphemes:a,maxGraphemes:b,"~run"(d,e){let f=d.length;if(f<a)return c;if(0===a&&f<=b)return;let h=(a=>{let b=g.segment(a)[Symbol.iterator](),c=0;for(;!b.next().done;)c++;return c})(d);if(h<a||h>b)return c}}},ar={ok:!1,code:"invalid_type",expected:"blob",msg:()=>"expected blob"},as={kind:"schema",type:"blob","~run"(a,b){let c;if("object"!=typeof a||null===a)return ar;if(!("object"==typeof a&&null!==a&&"blob"===a.$type&&"string"==typeof a.mimeType&&Number.isSafeInteger(a.size)&&"object"==typeof(c=a.ref)&&null!==c&&(w in c||r(c.$link))&&4===Object.keys(a).length))return"object"==typeof a&&null!==a&&"string"==typeof a.cid&&"string"==typeof a.mimeType&&2===Object.keys(a).length?I({$type:"blob",mimeType:a.mimeType,ref:{$link:a.cid},size:-1}):ar},get"~standard"(){return A(this,"~standard",T(this))}},at=()=>as,au={ok:!1,code:"invalid_type",expected:"bytes",msg:()=>"expected bytes"},av={kind:"schema",type:"bytes","~run"(a,b){let c;if(!("object"==typeof a&&null!==a&&(x in a||"string"==typeof(c=a.$bytes)&&y.test(c)&&1===Object.keys(a).length)))return au},get"~standard"(){return A(this,"~standard",T(this))}},aw=()=>av,ax=(a,b)=>({kind:"schema",type:"optional",wrapped:a,default:b,"~run"(c,d){if(void 0===c){if(void 0===b)return;return I("function"==typeof b?b():b)}return a["~run"](c,d)},get"~standard"(){return A(this,"~standard",T(this))}}),ay=a=>"optional"===a.type,az={ok:!1,code:"invalid_type",expected:"array",msg:()=>"expected array"},aA=a=>{let b=B(()=>"function"==typeof a?a():a);return{kind:"schema",type:"array",get item(){return A(this,"item",b.value)},get"~run"(){let a=b.value;return A(this,"~run",(b,c)=>{let d,e;if(!C(b))return az;for(let f=0,g=b.length;f<g;f++){let g=b[f],h=a["~run"](g,c);if(void 0!==h){if(h.ok)void 0===e&&(e=b.slice()),e[f]=h.value;else if(d=G(d,H(f,h)),1&c)return d}}return void 0!==d?d:void 0!==e?I(e):void 0})},get"~standard"(){return A(this,"~standard",T(this))}}},aB=(a,b=1/0)=>{let c={ok:!1,code:"invalid_array_length",minLength:a,maxLength:b,msg:()=>M("an array","item",a,b)};return{kind:"constraint",type:"array_length",minLength:a,maxLength:b,"~run"(d,e){let f=d.length;if(f<a||f>b)return c}}},aC={ok:!1,code:"invalid_type",expected:"object",msg:()=>"expected object"},aD={ok:!1,code:"missing_value",msg:()=>"missing value"},aE=(a,b,c)=>{"__proto__"===b?Object.defineProperty(a,b,{value:c}):a[b]=c},aF=a=>{let b=B(()=>{let b=[];for(let c in a){let d=a[c];b.push({key:c,schema:d,optional:ay(d),missing:H(c,aD)})}return b});return{kind:"schema",type:"object",get shape(){let a=b.value,c={};for(let b of a)c[b.key]=b.schema;return A(this,"shape",c)},get"~run"(){let a=b.value,c=a.length;if(E.value){let b=(()=>{let b=[["$ok",I],["$joinIssues",G],["$prependPath",H]],d="let $iss,$out;";for(let e=0;e<c;e++){let c=a[e],f=c.key,g=JSON.stringify(f),h=`_${e}`;if(d+=`{const $val=$in[${g}];`,c.optional?d+="if($val!==undefined){":d+=`if($val!==undefined||${g} in $in){`,d+=`const $res=${h}$schema["~run"]($val,$flags);if($res!==undefined)if($res.ok)${"__proto__"!==f?`($out??={...$in})[${g}]=$res.value`:`Object.defineProperty($out??={...$in},${g},{value:$res.value})`};else if((($iss=$joinIssues($iss,$prependPath(${g},$res))),$flags&1))return $iss;}`,c.optional){let a=c.schema,e=a.wrapped,i=a.default;if(b.push([`${h}$schema`,e]),void 0!==i){let a="function"==typeof i?`${h}$default()`:`${h}$default`;b.push([`${h}$default`,i]),d+="__proto__"!==f?`else($out??={...$in})[${g}]=${a};`:`else Object.defineProperty($out??={...$in},${g},{value:${a}});`}}else b.push([`${h}$schema`,c.schema]),b.push([`${h}$missing`,c.missing]),d+=`else if((($iss=$joinIssues($iss,${h}$missing)),$flags&1))return $iss;`;d+="}"}return d+="if($iss!==undefined)return $iss;if($out!==undefined)return $ok($out);",Function(`[${b.map(([a])=>a).join(",")}]`,`return function matcher($in,$flags){${d}}`)(b.map(([,a])=>a))})();return A(this,"~run",(a,c)=>D(a)?b(a,c):aC)}return A(this,"~run",(b,d)=>{let e,f;if(!D(b))return aC;for(let g=0;g<c;g++){let c=a[g],h=c.key,i=b[h];if(!c.optional&&void 0===i&&!(h in b)){if(e=G(e,c.missing),1&d)return e;continue}let j=c.schema["~run"](i,d);if(void 0!==j){if(j.ok)void 0===f&&(f={...b}),aE(f,h,j.value);else if(e=G(e,H(h,j)),1&d)return e}}return void 0!==e?e:void 0!==f?I(f):void 0})},get"~standard"(){return A(this,"~standard",T(this))}}},aG=(a,b)=>{let c=B(()=>{let a=b.shape.$type;return z(void 0!==a,"expected $type in record to be defined"),"optional"===a.type&&(a=a.wrapped),z("literal"===a.type&&"string"==typeof a.expected,"expected $type to be a string literal"),b});return{kind:"schema",type:"record",key:a,get object(){return A(this,"object",c.value)},"~run"(a,b){return A(this,"~run",c.value["~run"])(a,b)},get"~standard"(){return A(this,"~standard",T(this))}}},aH=H("$type",aD),aI=H("$type",ab),aJ=(a,b=!1)=>({kind:"schema",type:"variant",members:a,closed:b,get"~run"(){let c=Object.fromEntries(a.map((a,b)=>{let c=a.shape.$type;return z(void 0!==c,`expected $type in variant member #${b} to be defined`),"optional"===c.type&&(c=c.wrapped),z("literal"===c.type&&"string"==typeof c.expected,`expected $type in variant member #${b} to be a string literal`),[c.expected,a]})),d={ok:!1,code:"invalid_variant",expected:Object.keys(c),msg:()=>`expected ${((a,b)=>{switch(a.length){case 0:return"nothing";case 1:return a[0];default:return`${a.slice(0,-1).join(", ")} ${b} ${a[a.length-1]}`}})(Object.keys(c),"or")}`};return A(this,"~run",(a,e)=>{if(!D(a))return aC;let f=a.$type;if(void 0===f&&!("$type"in a))return aH;if("string"!=typeof f)return b?d:aI;let g=c[f];return void 0===g?b?d:void 0:g["~run"](a,e)})},get"~standard"(){return A(this,"~standard",T(this))}}),aK={ok:!1,code:"invalid_type",expected:"unknown",msg:()=>"expected unknown"},aL={kind:"schema",type:"unknown","~run"(a,b){if("object"!=typeof a||null===a)return aK},get"~standard"(){return A(this,"~standard",T(this))}},aM=()=>aL,aN=(a,b)=>(F=!0,{kind:"metadata",type:"xrpc_procedure",nsid:a,params:b.params,get input(){let a=b.input;return a?.type==="lex"&&(a={type:"lex",schema:a.schema}),A(this,"input",a)},get output(){let a=b.output;return a?.type==="lex"&&(a={type:"lex",schema:a.schema}),A(this,"output",a)}}),aO=(a,b)=>(F=!0,{kind:"metadata",type:"xrpc_query",nsid:a,params:b.params,get output(){let a=b.output;return a?.type==="lex"&&(a={type:"lex",schema:a.schema}),A(this,"output",a)}})},55046:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0})},60063:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.makeValidator=b.makeExactValidator=void 0;var d=c(82286);d.__exportStar(c(22148),b),d.__exportStar(c(64324),b),d.__exportStar(c(14395),b),d.__exportStar(c(55046),b),d.__exportStar(c(61764),b),d.__exportStar(c(19610),b);var e=c(77662);Object.defineProperty(b,"makeExactValidator",{enumerable:!0,get:function(){return e.makeExactValidator}}),Object.defineProperty(b,"makeValidator",{enumerable:!0,get:function(){return e.makeValidator}})},61764:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.json=b.url=b.port=b.host=b.email=b.str=b.num=b.bool=void 0;var d=c(64324),e=c(77662),f=function(a){if(!a.length)return!1;for(var b=a.split("."),c=void 0,d=0;d<b.length;d++)if(c=b[d],!/^[a-z\u00a1-\uffff0-9-]+$/i.test(c)||/[\uff01-\uff5e]/.test(c)||"-"===c[0]||"-"===c[c.length-1])return!1;return!0},g=/^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}$/,h=/^(([0-9a-f]{1,4}:){7}[0-9a-f]{1,4}|([0-9a-f]{1,4}:)+:([0-9a-f]{1,4}:)*[0-9a-f]{1,4}|([0-9a-f]{1,4}:)*::([0-9a-f]{1,4}:)*[0-9a-f]{0,4}|::|(([0-9a-f]{1,4}:){1,6}|:):((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9]))(%[0-9a-z.\-:]+)?$/i,i=/^[^@\s]+@[^@\s]+\.[^@\s]+$/;b.bool=(0,e.makeExactValidator)(function(a){switch(a){case!0:case"true":case"t":case"yes":case"on":case"1":return!0;case!1:case"false":case"f":case"no":case"off":case"0":return!1;default:throw new d.EnvError('Invalid bool input: "'.concat(a,'"'))}}),b.num=(0,e.makeValidator)(function(a){var b=parseFloat(a);if(Number.isNaN(b))throw new d.EnvError('Invalid number input: "'.concat(a,'"'));return b}),b.str=(0,e.makeValidator)(function(a){if("string"==typeof a)return a;throw new d.EnvError('Not a string: "'.concat(a,'"'))}),b.email=(0,e.makeValidator)(function(a){if(i.test(a))return a;throw new d.EnvError('Invalid email address: "'.concat(a,'"'))}),b.host=(0,e.makeValidator)(function(a){if(!f(a)&&!(a.length&&(g.test(a)||h.test(a))))throw new d.EnvError('Invalid host (domain or ip): "'.concat(a,'"'));return a}),b.port=(0,e.makeValidator)(function(a){var b=+a;if(Number.isNaN(b)||"".concat(b)!=="".concat(a)||b%1!=0||b<1||b>65535)throw new d.EnvError('Invalid port input: "'.concat(a,'"'));return b}),b.url=(0,e.makeValidator)(function(a){try{return new URL(a),a}catch(b){throw new d.EnvError('Invalid url: "'.concat(a,'"'))}}),b.json=(0,e.makeStructuredValidator)(function(a){try{return JSON.parse(a)}catch(b){throw new d.EnvError('Invalid json: "'.concat(a,'"'))}})},64324:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.EnvMissingError=b.EnvError=void 0;var d=c(82286);b.EnvError=function(a){function b(c){var d=this.constructor,e=a.call(this,c)||this;return Object.setPrototypeOf(e,d.prototype),Error.captureStackTrace(e,b),e.name=e.constructor.name,e}return d.__extends(b,a),b}(TypeError),b.EnvMissingError=function(a){function b(c){var d=this.constructor,e=a.call(this,c)||this;return Object.setPrototypeOf(e,d.prototype),Error.captureStackTrace(e,b),e.name=e.constructor.name,e}return d.__extends(b,a),b}(ReferenceError)},69412:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getSanitizedEnv=b.formatSpecDescription=b.testOnlySymbol=void 0;var d=c(64324),e=c(19610);function f(a){var b=a.example?' (eg. "'.concat(a.example,'")'):"",c=a.docs?". See ".concat(a.docs):"";return"".concat(a.desc).concat(b).concat(c)}b.testOnlySymbol=Symbol("envalid - test only"),b.formatSpecDescription=f;var g=function(a,b){return a[b]};b.getSanitizedEnv=function(a,c,h){void 0===h&&(h={});for(var i={},j={},k=Object.keys(c),l=g(a,"NODE_ENV"),m=0;m<k.length;m++){var n=k[m],o=c[n],p=g(a,n);try{if(void 0===p){if(l&&"production"!==l&&Object.hasOwn(o,"devDefault")){if(i[n]=o.devDefault,o.devDefault===b.testOnlySymbol&&"test"!=l)throw new d.EnvMissingError(f(o));continue}if("default"in o){i[n]=o.default;continue}throw i[n]=void 0,new d.EnvMissingError(f(o))}i[n]=function(a){var b=a.spec,c=a.name,e=a.rawValue;if("function"!=typeof b._parse)throw new d.EnvError('Invalid spec for "'.concat(c,'"'));var f=b._parse(e);if(b.choices)if(Array.isArray(b.choices)){if(!b.choices.includes(f))throw new d.EnvError('Value "'.concat(f,'" not in choices [').concat(b.choices,"]"))}else throw TypeError('"choices" must be an array (in spec for "'.concat(c,'")'));if(null==f)throw new d.EnvError('Invalid value for env var "'.concat(c,'"'));return f}({name:n,spec:o,rawValue:p})}catch(a){if((null==h?void 0:h.reporter)===null)throw a;a instanceof Error&&(j[n]=a)}}for(var q=0;q<k.length;q++){var n=k[q];if(void 0==j[n]){var o=c[n];void 0==i[n]&&void 0!==o.requiredWhen&&o.requiredWhen(i)&&(j[n]=new d.EnvMissingError(f(o)))}}return((null==h?void 0:h.reporter)||e.defaultReporter)({errors:j,env:i}),i}},77662:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.makeStructuredValidator=b.makeExactValidator=b.makeValidator=void 0;var d=c(82286),e=function(a){return function(b){return d.__assign(d.__assign({},b),{_parse:a})}};b.makeValidator=function(a){return e(a)},b.makeExactValidator=function(a){return e(a)},b.makeStructuredValidator=function(a){return e(a)}},82286:(a,b,c)=>{c.r(b),c.d(b,{__addDisposableResource:()=>J,__assign:()=>f,__asyncDelegator:()=>z,__asyncGenerator:()=>y,__asyncValues:()=>A,__await:()=>x,__awaiter:()=>o,__classPrivateFieldGet:()=>G,__classPrivateFieldIn:()=>I,__classPrivateFieldSet:()=>H,__createBinding:()=>q,__decorate:()=>h,__disposeResources:()=>L,__esDecorate:()=>j,__exportStar:()=>r,__extends:()=>e,__generator:()=>p,__importDefault:()=>F,__importStar:()=>E,__makeTemplateObject:()=>B,__metadata:()=>n,__param:()=>i,__propKey:()=>l,__read:()=>t,__rest:()=>g,__rewriteRelativeImportExtension:()=>M,__runInitializers:()=>k,__setFunctionName:()=>m,__spread:()=>u,__spreadArray:()=>w,__spreadArrays:()=>v,__values:()=>s,default:()=>N});var d=function(a,b){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};function e(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function g(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function h(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}function i(a,b){return function(c,d){b(c,d,a)}}function j(a,b,c,d,e,f){function g(a){if(void 0!==a&&"function"!=typeof a)throw TypeError("Function expected");return a}for(var h,i=d.kind,j="getter"===i?"get":"setter"===i?"set":"value",k=!b&&a?d.static?a:a.prototype:null,l=b||(k?Object.getOwnPropertyDescriptor(k,d.name):{}),m=!1,n=c.length-1;n>=0;n--){var o={};for(var p in d)o[p]="access"===p?{}:d[p];for(var p in d.access)o.access[p]=d.access[p];o.addInitializer=function(a){if(m)throw TypeError("Cannot add initializers after decoration has completed");f.push(g(a||null))};var q=(0,c[n])("accessor"===i?{get:l.get,set:l.set}:l[j],o);if("accessor"===i){if(void 0===q)continue;if(null===q||"object"!=typeof q)throw TypeError("Object expected");(h=g(q.get))&&(l.get=h),(h=g(q.set))&&(l.set=h),(h=g(q.init))&&e.unshift(h)}else(h=g(q))&&("field"===i?e.unshift(h):l[j]=h)}k&&Object.defineProperty(k,d.name,l),m=!0}function k(a,b,c){for(var d=arguments.length>2,e=0;e<b.length;e++)c=d?b[e].call(a,c):b[e].call(a);return d?c:void 0}function l(a){return"symbol"==typeof a?a:"".concat(a)}function m(a,b,c){return"symbol"==typeof b&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:c?"".concat(c," ",b):b})}function n(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)}function o(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function p(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=h(0),g.throw=h(1),g.return=h(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;g&&(g=0,j[0]&&(f=0)),f;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return f.label++,{value:j[1],done:!1};case 5:f.label++,d=j[1],j=[0];continue;case 7:j=f.ops.pop(),f.trys.pop();continue;default:if(!(e=(e=f.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){f=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){f.label=j[1];break}if(6===j[0]&&f.label<e[1]){f.label=e[1],e=j;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(j);break}e[2]&&f.ops.pop(),f.trys.pop();continue}j=b.call(a,f)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}}var q=Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]};function r(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||q(b,a,c)}function s(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function t(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g}function u(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(t(arguments[b]));return a}function v(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var d=Array(a),e=0,b=0;b<c;b++)for(var f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d}function w(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function x(a){return this instanceof x?(this.v=a,this):new x(a)}function y(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof x?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function z(a){var b,c;return b={},d("next"),d("throw",function(a){throw a}),d("return"),b[Symbol.iterator]=function(){return this},b;function d(d,e){b[d]=a[d]?function(b){return(c=!c)?{value:x(a[d](b)),done:!1}:e?e(b):b}:e}}function A(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=s(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function B(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a}var C=Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b},D=function(a){return(D=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)};function E(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=D(a),d=0;d<c.length;d++)"default"!==c[d]&&q(b,a,c[d]);return C(b,a),b}function F(a){return a&&a.__esModule?a:{default:a}}function G(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)}function H(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c}function I(a,b){if(null===b||"object"!=typeof b&&"function"!=typeof b)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof a?b===a:a.has(b)}function J(a,b,c){if(null!=b){var d,e;if("object"!=typeof b&&"function"!=typeof b)throw TypeError("Object expected.");if(c){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");d=b[Symbol.asyncDispose]}if(void 0===d){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");d=b[Symbol.dispose],c&&(e=d)}if("function"!=typeof d)throw TypeError("Object not disposable.");e&&(d=function(){try{e.call(this)}catch(a){return Promise.reject(a)}}),a.stack.push({value:b,dispose:d,async:c})}else c&&a.stack.push({async:!0});return b}var K="function"==typeof SuppressedError?SuppressedError:function(a,b,c){var d=Error(c);return d.name="SuppressedError",d.error=a,d.suppressed=b,d};function L(a){function b(b){a.error=a.hasError?new K(b,a.error,"An error was suppressed during disposal."):b,a.hasError=!0}var c,d=0;return function e(){for(;c=a.stack.pop();)try{if(!c.async&&1===d)return d=0,a.stack.push(c),Promise.resolve().then(e);if(c.dispose){var f=c.dispose.call(c.value);if(c.async)return d|=2,Promise.resolve(f).then(e,function(a){return b(a),e()})}else d|=1}catch(a){b(a)}if(1===d)return a.hasError?Promise.reject(a.error):Promise.resolve();if(a.hasError)throw a.error}()}function M(a,b){return"string"==typeof a&&/^\.\.?\//.test(a)?a.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,d,e,f){return c?b?".jsx":".js":!d||e&&f?d+e+"."+f.toLowerCase()+"js":a}):a}let N={__extends:e,__assign:f,__rest:g,__decorate:h,__param:i,__esDecorate:j,__runInitializers:k,__propKey:l,__setFunctionName:m,__metadata:n,__awaiter:o,__generator:p,__createBinding:q,__exportStar:r,__values:s,__read:t,__spread:u,__spreadArrays:v,__spreadArray:w,__await:x,__asyncGenerator:y,__asyncDelegator:z,__asyncValues:A,__makeTemplateObject:B,__importStar:E,__importDefault:F,__classPrivateFieldGet:G,__classPrivateFieldSet:H,__classPrivateFieldIn:I,__addDisposableResource:J,__disposeResources:L,__rewriteRelativeImportExtension:M}}};