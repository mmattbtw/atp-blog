(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{5608:(e,t,r)=>{Promise.resolve().then(r.bind(r,23454)),Promise.resolve().then(r.bind(r,84512))},18490:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(95155),a=r(52619),u=r.n(a);function l(e){let{href:t,children:r,target:a,rel:l,className:i=""}=e,c=t.startsWith("http")||t.startsWith("mailto:"),s="underline bg-white dark:bg-black hover:text-white hover:bg-black dark:hover:text-black dark:hover:bg-white ".concat(i);return c?(0,n.jsx)("a",{href:t,target:a||"_blank",rel:l||"noopener noreferrer",className:s,children:r}):(0,n.jsx)(u(),{href:t,className:s,children:r})}},23454:(e,t,r)=>{"use strict";r.d(t,{BlogVideoBackground:()=>i,default:()=>l});var n=r(95155),a=r(12115);function u(e){let{videoSrc:t,pixelSize:r=4,ditherStrength:u=1,className:l="",maxWidth:i=640}=e,c=(0,a.useRef)(null),s=(0,a.useRef)(null),o=(0,a.useRef)(0),d=(0,a.useRef)(null),h=(0,a.useRef)(null),f=(0,a.useRef)(null),m=(0,a.useRef)(!1),v=(0,a.useRef)(0),g=(0,a.useRef)(0),p=(0,a.useRef)(0),[b,w]=(0,a.useState)(!1),x=(0,a.useRef)(null),k=(0,a.useRef)(0),[E,y]=(0,a.useState)(!1),R=(0,a.useCallback)(()=>{{let e=window.matchMedia("(prefers-reduced-motion: reduce)");w(e.matches);let t=e=>{w(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}},[]),C=(0,a.useCallback)(function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.data,l=t*r;h.current&&h.current.length===l||(h.current=new Float32Array(l));let i=h.current;i.fill(0);for(let e=0;e<a.length;e+=4){let r,l=.299*a[e]+.587*a[e+1]+.114*a[e+2];i[e>>2]=l,r=n?l<128+((e/4%t+Math.floor(e/4/t))%2-.5)*u*10?0:255:l<128+(Math.random()-.5)*u*20?0:255,a[e]=a[e+1]=a[e+2]=r,a[e+3]=255}return e},[u]),L=(0,a.useCallback)(()=>{let e;if(b||E)return;let t=c.current,n=s.current;if(!t||!n||m.current)return;if(m.current=!0,t.paused||t.ended){m.current=!1;return}let a=t.videoWidth,u=t.videoHeight;if(0===a||0===u||(p.current++,p.current%4!=0)){m.current=!1,o.current=requestAnimationFrame(L);return}let l=Math.min(a,i),h=Math.floor(u*l/a);(n.width!==l||n.height!==h)&&(n.width=l,n.height=h,d.current=null),d.current||(d.current=n.getContext("2d",{willReadFrequently:!0,alpha:!1}));let f=d.current;if(!f){m.current=!1;return}let v=Math.floor(l/r),g=Math.floor(h/r);if(v<1||g<1){m.current=!1,o.current=requestAnimationFrame(L);return}try{f.drawImage(t,0,0,v,g),e=f.getImageData(0,0,v,g)}catch(e){console.warn("Canvas manipulation blocked due to CORS policy:",e),y(!0),m.current=!1;return}let w=C(e,v,g,b);f.putImageData(w,0,0),b&&(x.current=w),f.imageSmoothingEnabled=!1,f.drawImage(n,0,0,v,g,0,0,l,h),m.current=!1,o.current=requestAnimationFrame(L)},[r,i,C,b,E]),j=(0,a.useCallback)(()=>{m.current||b||E||(p.current=0,L())},[L,b,E]),S=(0,a.useCallback)(()=>{let e=c.current;!e||e.paused||m.current||b||E||(p.current=0,L())},[L,b,E]),M=(0,a.useCallback)(()=>{let e=c.current;e&&e.loop&&!b&&!E&&(v.current=0,p.current=0,setTimeout(()=>{e.paused||m.current||L()},16))},[L,b,E]),N=(0,a.useCallback)(()=>{if(o.current&&(cancelAnimationFrame(o.current),o.current=0),d.current){let e=s.current;e&&d.current.clearRect(0,0,e.width,e.height),d.current=null}h.current&&(h.current=null),m.current=!1,v.current=0,p.current=0,g.current=0,f.current=null},[]);(0,a.useEffect)(()=>R(),[R]);let A=(0,a.useCallback)(()=>{let e=s.current;if(!e)return;let t=e.getContext("2d");if(!t)return;e.width=640,e.height=360;let r=t.createImageData(640,360),n=r.data;for(let e=0;e<n.length;e+=4){let t=e/4%640,r=Math.floor(e/4/640),a=(t+r)%2,l=128+50*a+Math.sin(.1*t)*Math.cos(.1*r)*9<128+(a-.5)*u*10?0:255;n[e]=n[e+1]=n[e+2]=l,n[e+3]=255}t.putImageData(r,0,0)},[u]);return(0,a.useEffect)(()=>{b?(o.current&&(cancelAnimationFrame(o.current),o.current=0),m.current=!1,A()):(p.current=0,k.current=0,m.current=!1,m.current||L())},[b,L,A]),(0,a.useEffect)(()=>{let e=c.current;if(!e)return;e.addEventListener("play",j),e.addEventListener("playing",j),e.addEventListener("loadedmetadata",S),e.addEventListener("ended",M);let t=()=>{document.hidden?N():e.paused||b||(p.current=0,L())};return document.addEventListener("visibilitychange",t),()=>{N(),e.removeEventListener("play",j),e.removeEventListener("playing",j),e.removeEventListener("loadedmetadata",S),e.removeEventListener("ended",M),document.removeEventListener("visibilitychange",t)}},[j,S,M,N,L,b]),(0,n.jsxs)("div",{className:"relative ".concat(l),children:[(0,n.jsx)("video",{ref:c,src:t,crossOrigin:"anonymous",className:"absolute inset-0 w-full h-full object-cover ".concat(E?"opacity-50":"invisible"," ").concat(b?"reduced-motion":""),autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:e=>{console.error("Video error:",e),y(!0)},onLoadStart:()=>console.log("Video loading started"),onLoadedMetadata:()=>console.log("Video metadata loaded")}),(0,n.jsx)("canvas",{ref:s,className:"absolute inset-0 w-full h-full object-cover",style:{imageRendering:"pixelated"}}),E&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 text-white text-sm opacity-75",children:"Video filter unavailable (CORS)"})]})}function l(){return(0,n.jsx)(u,{videoSrc:"https://wh9xsi1isi.ufs.sh/f/3pCuYtORE70iQcTd1tzKQmgchpDLvW6HRVeJosuUikOnjwbf",pixelSize:3,maxFPS:12,maxWidth:1e3,className:"fixed inset-0 w-screen h-screen object-cover -z-10 invert dark:invert-0"})}function i(){return(0,n.jsx)(u,{videoSrc:"https://wh9xsi1isi.ufs.sh/f/3pCuYtORE70iFh1vC2kQTmgCPNMpYynkzK4WXJelbq527Zjo",pixelSize:4,maxFPS:12,maxWidth:1e3,className:"fixed inset-0 w-screen h-screen object-cover -z-10 invert dark:invert-0"})}},84512:(e,t,r)=>{"use strict";r.d(t,{PostListItem:()=>u});var n=r(95155),a=r(18490);function u(e){let{post:t,rkey:r}=e,u=function(e){if("whitewind"===e.type){var t,r;return null!=(r=null==(t=e.value.title)?void 0:t.split(" || ")[0])?r:"Untitled"}return e.value.title}(t),l="whitewind"===t.type?t.value.createdAt:t.value.publishedAt;return(0,n.jsxs)(a.A,{href:"/post/".concat(r),children:[new Date(null!=l?l:"").toLocaleDateString()," - ",u]})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=5608)),_N_E=e.O()}]);