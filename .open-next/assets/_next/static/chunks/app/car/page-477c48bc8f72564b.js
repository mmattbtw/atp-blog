(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{49086:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,52619,23)),Promise.resolve().then(r.bind(r,57317))},57317:(e,t,r)=>{"use strict";r.d(t,{CarStatsClient:()=>V});var a=r(95155),n=r(92273),s=r(30563),l=r(3166),i=r(33738),o=r(35299),c=r(12115),d=r(84879),m=r(68425),u=r(47734),x=r(73697),h=r(77568),g=r(26991),p=r(23508),f=r(7620),j=r(64269);let v={light:"",dark:".dark"},b=c.createContext(null);function N(e){let{id:t,className:r,children:n,config:s,...l}=e,i=c.useId(),o="chart-".concat(t||i.replace(/:/g,""));return(0,a.jsx)(b.Provider,{value:{config:s},children:(0,a.jsxs)("div",{"data-slot":"chart","data-chart":o,className:(0,j.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",r),...l,children:[(0,a.jsx)(y,{id:o,config:s}),(0,a.jsx)(g.u,{children:n})]})})}let y=e=>{let{id:t,config:r}=e,n=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(v).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[a,n]=e,s=(null==(t=n.theme)?void 0:t[r])||n.color;return s?"  --color-".concat(a,": ").concat(s,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},w=p.m;function k(e){let{active:t,payload:r,className:n,indicator:s="dot",hideLabel:l=!1,hideIndicator:i=!1,label:o,labelFormatter:d,labelClassName:m,formatter:u,color:x,nameKey:h,labelKey:g}=e,{config:p}=function(){let e=c.useContext(b);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}(),f=c.useMemo(()=>{var e;if(l||!(null==r?void 0:r.length))return null;let[t]=r,n="".concat(g||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),s=F(p,t,n),i=g||"string"!=typeof o?null==s?void 0:s.label:(null==(e=p[o])?void 0:e.label)||o;return d?(0,a.jsx)("div",{className:(0,j.cn)("font-medium",m),children:d(i,r)}):i?(0,a.jsx)("div",{className:(0,j.cn)("font-medium",m),children:i}):null},[o,d,r,l,m,p,g]);if(!t||!(null==r?void 0:r.length))return null;let v=1===r.length&&"dot"!==s;return(0,a.jsxs)("div",{className:(0,j.cn)("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",n),children:[v?null:f,(0,a.jsx)("div",{className:"grid gap-1.5",children:r.filter(e=>"none"!==e.type).map((e,t)=>{let r="".concat(h||e.name||e.dataKey||"value"),n=F(p,e,r),l=x||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,j.cn)("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===s&&"items-center"),children:u&&(null==e?void 0:e.value)!==void 0&&e.name?u(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==n?void 0:n.icon)?(0,a.jsx)(n.icon,{}):!i&&(0,a.jsx)("div",{className:(0,j.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===s,"w-1":"line"===s,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===s,"my-0.5":v&&"dashed"===s}),style:{"--color-bg":l,"--color-border":l}}),(0,a.jsxs)("div",{className:(0,j.cn)("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[v?f:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==n?void 0:n.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"text-foreground font-mono font-medium tabular-nums",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}function F(e,t,r){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=r;return r in t&&"string"==typeof t[r]?n=t[r]:a&&r in a&&"string"==typeof a[r]&&(n=a[r]),n in e?e[n]:e[r]}f.s;var M=r(74278),S=r(11785);function C(e){let{delayDuration:t=0,...r}=e;return(0,a.jsx)(S.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function R(e){let{...t}=e;return(0,a.jsx)(C,{children:(0,a.jsx)(S.bL,{"data-slot":"tooltip",...t})})}function D(e){let{...t}=e;return(0,a.jsx)(S.l9,{"data-slot":"tooltip-trigger",...t})}function L(e){let{className:t,sideOffset:r=0,children:n,...s}=e;return(0,a.jsx)(S.ZL,{children:(0,a.jsxs)(S.UC,{"data-slot":"tooltip-content",sideOffset:r,className:(0,j.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[n,(0,a.jsx)(S.i3,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function A(e){let{number:t,decimalPlaces:r}=e,n=Math.floor(Math.abs(t)),s=n.toString(),l=[];for(let e=s.length;e>0;e-=3){let t=Math.max(0,e-3);l.unshift(parseInt(s.slice(t,e),10))}let i=l.map((e,t)=>0===t?e:e.toString().padStart(3,"0"));return(0,a.jsxs)("span",{className:"inline-flex items-center",children:[t<0&&(0,a.jsx)("span",{children:"-"}),i.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center",children:[t>0&&(0,a.jsx)("span",{className:"mx-px",children:","}),(0,a.jsx)(M.G,{number:"string"==typeof e?parseInt(e,10):e,padStart:t>0})]},t)),void 0!==r&&r>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"."}),(0,a.jsx)(M.G,{number:Math.round((Math.abs(t)-n)*Math.pow(10,r)),padStart:!0})]})]})}function _(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}function P(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}let T={fuel:{label:"Fuel Level",color:"var(--chart-1)"}},O={odometer:{label:"Odometer",color:"var(--chart-2)"}},G={range:{label:"Est. Range",color:"var(--chart-3)"}};function E(e){var t,r,n,s;let{data:l}=e,i=l.map(e=>({date:e.createdAt,fuel:parseFloat(e.carPercentFuelRemaining)})),o=(null==(t=i[i.length-1])?void 0:t.fuel)||0,c=(null==(r=i[0])?void 0:r.fuel)||0,g=o-c,p=c?(g/c*100).toFixed(1):"0",f=null==(n=l[0])?void 0:n.createdAt,j=null==(s=l[l.length-1])?void 0:s.createdAt,v=f&&j?"Change from ".concat(P(f)," to ").concat(P(j)):"";return(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white/5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fuel Level"}),(0,a.jsxs)("p",{className:"text-2xl font-bold flex items-baseline",children:[(0,a.jsx)(M.G,{number:Math.round(o)}),(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:"%"})]})]}),(0,a.jsxs)(R,{children:[(0,a.jsx)(D,{asChild:!0,children:(0,a.jsxs)("div",{className:"text-sm cursor-help ".concat(g>=0?"text-green-500":"text-red-500"),children:[g>=0?"↑":"↓"," ",Math.abs(g).toFixed(1)," (",g>=0?"+":"",p,"%)"]})}),(0,a.jsx)(L,{children:(0,a.jsx)("p",{children:v})})]})]}),(0,a.jsx)(N,{config:T,className:"h-48 w-full",children:(0,a.jsxs)(d.Q,{data:i,accessibilityLayer:!0,children:[(0,a.jsx)(m.d,{vertical:!1,strokeDasharray:"3 3"}),(0,a.jsx)(u.W,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>P(e)}),(0,a.jsx)(x.h,{tickLine:!1,axisLine:!1,tickMargin:8,domain:[0,100],tickFormatter:e=>"".concat(e,"%")}),(0,a.jsx)(w,{content:(0,a.jsx)(k,{labelFormatter:e=>_(e),formatter:e=>["".concat(Math.round(Number(e)),"%")," Fuel Level"]})}),(0,a.jsx)(h.G,{dataKey:"fuel",type:"monotone",fill:"var(--color-fuel)",fillOpacity:.3,stroke:"var(--color-fuel)",strokeWidth:2})]})})]})}function z(e){var t,r,n,s;let{data:l}=e,i=l.map(e=>({date:e.createdAt,odometer:e.carTraveledDistance})),o=(null==(t=i[i.length-1])?void 0:t.odometer)||0,c=(null==(r=i[0])?void 0:r.odometer)||0,g=o-c,p=c?(g/c*100).toFixed(1):"0",f=null==(n=l[0])?void 0:n.createdAt,j=null==(s=l[l.length-1])?void 0:s.createdAt,v=f&&j?"Change from ".concat(P(f)," to ").concat(P(j)):"";return(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white/5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Odometer"}),(0,a.jsxs)("p",{className:"text-2xl font-bold flex items-baseline gap-1",children:[(0,a.jsx)(A,{number:o}),(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"mi"})]})]}),(0,a.jsxs)(R,{children:[(0,a.jsx)(D,{asChild:!0,children:(0,a.jsxs)("div",{className:"text-sm cursor-help ".concat(g>=0?"text-green-500":"text-red-500"),children:[g>=0?"↑":"↓"," ",Math.abs(g).toLocaleString()," (",g>=0?"+":"",p,"%)"]})}),(0,a.jsx)(L,{children:(0,a.jsx)("p",{children:v})})]})]}),(0,a.jsx)(N,{config:O,className:"h-48 w-full",children:(0,a.jsxs)(d.Q,{data:i,accessibilityLayer:!0,children:[(0,a.jsx)(m.d,{vertical:!1,strokeDasharray:"3 3"}),(0,a.jsx)(u.W,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>P(e)}),(0,a.jsx)(x.h,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k")}),(0,a.jsx)(w,{content:(0,a.jsx)(k,{labelFormatter:e=>_(e),formatter:e=>["".concat(Number(e).toLocaleString()," mi")," Odometer"]})}),(0,a.jsx)(h.G,{dataKey:"odometer",type:"monotone",fill:"var(--color-odometer)",fillOpacity:.3,stroke:"var(--color-odometer)",strokeWidth:2})]})})]})}function I(e){var t,r,n,s;let{data:l}=e,i=l.map(e=>({date:e.createdAt,range:e.carFuelRange})),o=(null==(t=i[i.length-1])?void 0:t.range)||0,c=(null==(r=i[0])?void 0:r.range)||0,g=o-c,p=c?(g/c*100).toFixed(1):"0",f=null==(n=l[0])?void 0:n.createdAt,j=null==(s=l[l.length-1])?void 0:s.createdAt,v=f&&j?"Change from ".concat(P(f)," to ").concat(P(j)):"";return(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white/5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Range"}),(0,a.jsxs)("p",{className:"text-2xl font-bold flex items-baseline gap-1",children:[(0,a.jsx)(M.G,{number:o}),(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"mi"})]})]}),(0,a.jsxs)(R,{children:[(0,a.jsx)(D,{asChild:!0,children:(0,a.jsxs)("div",{className:"text-sm cursor-help ".concat(g>=0?"text-green-500":"text-red-500"),children:[g>=0?"↑":"↓"," ",Math.abs(g).toLocaleString()," (",g>=0?"+":"",p,"%)"]})}),(0,a.jsx)(L,{children:(0,a.jsx)("p",{children:v})})]})]}),(0,a.jsx)(N,{config:G,className:"h-48 w-full",children:(0,a.jsxs)(d.Q,{data:i,accessibilityLayer:!0,children:[(0,a.jsx)(m.d,{vertical:!1,strokeDasharray:"3 3"}),(0,a.jsx)(u.W,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>P(e)}),(0,a.jsx)(x.h,{tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>"".concat(e)}),(0,a.jsx)(w,{content:(0,a.jsx)(k,{labelFormatter:e=>_(e),formatter:e=>["".concat(Number(e).toLocaleString()," mi")," Est. Range"]})}),(0,a.jsx)(h.G,{dataKey:"range",type:"monotone",fill:"var(--color-range)",fillOpacity:.3,stroke:"var(--color-range)",strokeWidth:2})]})})]})}let K=(0,n.FB)(),W=[K.accessor("createdAt",{header:"Date",cell:e=>_(e.getValue()),sortingFn:(e,t)=>new Date(e.original.createdAt).getTime()-new Date(t.original.createdAt).getTime()}),K.accessor("carTraveledDistance",{header:"Odometer",cell:e=>"".concat(e.getValue().toLocaleString()," mi")}),K.accessor("carPercentFuelRemaining",{header:"Fuel %",cell:e=>"".concat(Math.round(parseFloat(e.getValue())),"%")}),K.accessor("carFuelRange",{header:"Range",cell:e=>"".concat(e.getValue()," mi")}),K.accessor("amountRemaining",{header:"Gallons",cell:e=>"".concat(e.getValue()," gal")})];function V(e){let{initialRecords:t,initialCursor:r}=e,[d,m]=(0,c.useState)(t),[u,x]=(0,c.useState)(r),[h,g]=(0,c.useTransition)(),[p,f]=(0,c.useState)("fuel"),[j,v]=(0,c.useState)([{id:"createdAt",desc:!0}]),[b,N]=(0,c.useState)(!1),y=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e=()=>{let t=new WebSocket("wss://jetstream.fire.hose.cam/subscribe?wantedCollections=net.mmatt.vitals.car&wantedDids=did:plc:tas6hj2xjrqben5653v5kohk");y.current=t,t.onopen=()=>{console.log("[Jetstream] Connected to live feed"),N(!0)},t.onmessage=e=>{try{var t,r,a;let n=JSON.parse(e.data);if("commit"===n.kind&&(null==(t=n.commit)?void 0:t.operation)==="create"&&(null==(r=n.commit)?void 0:r.collection)==="net.mmatt.vitals.car"&&(null==(a=n.commit)?void 0:a.record)){let e=n.commit.record,t={createdAt:e.createdAt,carFuelRange:e.carFuelRange,carPercentFuelRemaining:e.carPercentFuelRemaining,amountRemaining:e.amountRemaining,carTraveledDistance:e.carTraveledDistance};console.log("[Jetstream] New car record received:",t),m(e=>[...e,t].sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()))}}catch(e){console.error("[Jetstream] Failed to parse message:",e)}},t.onclose=()=>{console.log("[Jetstream] Disconnected, reconnecting in 5s..."),N(!1),setTimeout(e,5e3)},t.onerror=e=>{console.error("[Jetstream] WebSocket error:",e),t.close()}};return e(),()=>{y.current&&y.current.close()}},[]);let w=(0,c.useCallback)(async()=>{u&&g(async()=>{let e=await fetch("/api/car-records?cursor=".concat(u)),t=await e.json();t.records&&(m([...d,...t.records].sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())),x(t.cursor))})},[u,d]),k=(0,c.useMemo)(()=>(function(e){let t=new Set;return e.filter(e=>{let r="".concat(e.carTraveledDistance,"-").concat(e.carPercentFuelRemaining,"-").concat(e.carFuelRange,"-").concat(e.amountRemaining);return!t.has(r)&&(t.add(r),!0)})})(d),[d]),F=(0,s.N4)({data:k,columns:W,state:{sorting:j},onSortingChange:v,getCoreRowModel:(0,n.HT)(),getSortedRowModel:(0,n.h5)(),getPaginationRowModel:(0,n.kW)(),initialState:{pagination:{pageSize:20}}}),S=(0,c.useMemo)(()=>{if(0===k.length)return null;let e=k[k.length-1],t=k[0],r=e.carTraveledDistance-t.carTraveledDistance,a=Math.ceil((new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())/864e5),n=k.map(e=>parseFloat(e.carPercentFuelRemaining));return{totalMiles:r,daysBetween:a,avgMilesPerDay:a>0?r/a:0,avgFuel:n.reduce((e,t)=>e+t,0)/n.length,latestOdometer:e.carTraveledDistance,latestFuelPercent:parseFloat(e.carPercentFuelRemaining),latestRange:e.carFuelRange,recordCount:k.length,duplicatesRemoved:d.length-k.length}},[k,d.length]);return 0===k.length?(0,a.jsx)("div",{className:"w-full p-8 text-center text-muted-foreground",children:"No car records found."}):(0,a.jsxs)("div",{className:"w-full space-y-6",children:[S&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white/5",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current Odometer"}),(0,a.jsxs)("p",{className:"text-xl font-bold flex items-baseline gap-1",children:[(0,a.jsx)(A,{number:S.latestOdometer}),(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"mi"})]})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white/5",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fuel Level"}),(0,a.jsxs)("p",{className:"text-xl font-bold flex items-baseline",children:[(0,a.jsx)(M.G,{number:Math.round(S.latestFuelPercent)}),(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"%"})]})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white/5",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Est. Range"}),(0,a.jsxs)("p",{className:"text-xl font-bold flex items-baseline gap-1",children:[(0,a.jsx)(M.G,{number:S.latestRange}),(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"mi"})]})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg bg-white/5",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Miles/Day"}),(0,a.jsx)("p",{className:"text-xl font-bold flex items-baseline",children:(0,a.jsx)(M.G,{number:S.avgMilesPerDay,decimalPlaces:1})})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(D,{asChild:!0,children:(0,a.jsx)("span",{className:"inline-flex items-center gap-1.5 cursor-help",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"size-3.5 text-green-500"}),(0,a.jsx)("span",{className:"text-green-500",children:"Live"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{className:"size-3.5 text-muted-foreground"}),(0,a.jsx)("span",{children:"Connecting..."})]})})}),(0,a.jsx)(L,{children:(0,a.jsx)("p",{children:b?"Connected to Jetstream for real-time updates":"Reconnecting to Jetstream..."})})]}),(0,a.jsxs)("span",{children:["• ",d.length," records loaded"]}),S&&S.duplicatesRemoved>0&&(0,a.jsxs)("span",{children:["• ",S.duplicatesRemoved," duplicate",1!==S.duplicatesRemoved?"s":""," removed"]}),(0,a.jsxs)("span",{children:["•"," ",(0,a.jsx)("a",{href:"https://pdsls.dev/at://did:plc:tas6hj2xjrqben5653v5kohk/net.mmatt.vitals.car",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-foreground",children:"see complete history"})]}),u&&(0,a.jsxs)("button",{onClick:w,disabled:h,className:"ml-auto px-4 py-2 rounded-lg text-sm font-medium bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[h&&(0,a.jsx)(o.A,{className:"size-4 animate-spin"}),"Load More"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>f("fuel"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("fuel"===p?"bg-primary text-primary-foreground":"bg-white/5 hover:bg-white/10"),children:"Fuel Level"}),(0,a.jsx)("button",{onClick:()=>f("distance"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("distance"===p?"bg-primary text-primary-foreground":"bg-white/5 hover:bg-white/10"),children:"Odometer"}),(0,a.jsx)("button",{onClick:()=>f("range"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("range"===p?"bg-primary text-primary-foreground":"bg-white/5 hover:bg-white/10"),children:"Est. Range"})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:["fuel"===p&&(0,a.jsx)(E,{data:k}),"distance"===p&&(0,a.jsx)(z,{data:k}),"range"===p&&(0,a.jsx)(I,{data:k})]}),(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 bg-white/5 border-b",children:(0,a.jsx)("h3",{className:"font-semibold",children:"Historical Data"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-white/5",children:F.getHeaderGroups().map(e=>(0,a.jsx)("tr",{children:e.headers.map(e=>{var t;return(0,a.jsx)("th",{className:"text-left p-3 cursor-pointer select-none hover:bg-white/5",onClick:e.column.getToggleSortingHandler(),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.Kv)(e.column.columnDef.header,e.getContext()),null!=(t=({asc:" ↑",desc:" ↓"})[e.column.getIsSorted()])?t:null]})},e.id)})},e.id))}),(0,a.jsx)("tbody",{children:F.getRowModel().rows.map(e=>(0,a.jsx)("tr",{className:"border-t border-white/5",children:e.getVisibleCells().map(e=>(0,a.jsx)("td",{className:"p-3",children:(0,s.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,a.jsxs)("div",{className:"p-4 bg-white/5 border-t flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing"," ",F.getState().pagination.pageIndex*F.getState().pagination.pageSize+1," ","to"," ",Math.min((F.getState().pagination.pageIndex+1)*F.getState().pagination.pageSize,k.length)," ","of ",k.length," records"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>F.previousPage(),disabled:!F.getCanPreviousPage(),className:"px-3 py-1 rounded text-sm bg-white/5 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>F.nextPage(),disabled:!F.getCanNextPage(),className:"px-3 py-1 rounded text-sm bg-white/5 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2821),n=r(75889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},74278:(e,t,r)=>{"use strict";r.d(t,{G:()=>x});var a=r(95155),n=r(12115),s=r(33327),l=r(99770),i=r(94132),o=r(74570),c=r(9364),d=r(64269);function m(e){let{prevValue:t,value:r,place:l,transition:i}=e,o=Math.floor(t/l)%10,d=Math.floor(r/l)%10,m=(0,s.z)(o,i);n.useEffect(()=>{m.set(d)},[d,m]);let[x,{height:h}]=(0,c.A)();return(0,a.jsxs)("span",{ref:x,"data-slot":"sliding-number-roller",className:"relative inline-block w-[1ch] overflow-x-visible overflow-y-clip leading-none tabular-nums",children:[(0,a.jsx)("span",{className:"invisible",children:"0"}),Array.from({length:10},(e,t)=>(0,a.jsx)(u,{motionValue:m,number:t,height:h,transition:i},t))]})}function u(e){let{motionValue:t,number:r,height:n,transition:s}=e,o=(0,l.G)(t,e=>{if(!n)return 0;let t=(10+r-e%10)%10,a=t*n;return t>5&&(a-=10*n),a});return n?(0,a.jsx)(i.P.span,{"data-slot":"sliding-number-display",style:{y:o},className:"absolute inset-0 flex items-center justify-center",transition:{...s,type:"spring"},children:r}):(0,a.jsx)("span",{className:"invisible absolute",children:r})}function x(e){var t;let{ref:r,number:s,className:l,inView:i=!1,inViewMargin:c="0px",inViewOnce:u=!0,padStart:x=!1,decimalSeparator:h=".",decimalPlaces:g=0,transition:p={stiffness:200,damping:20,mass:.4},...f}=e,j=n.useRef(null);n.useImperativeHandle(r,()=>j.current);let v=(0,o.W)(j,{once:u,margin:c}),b=!i||v,N=n.useRef(0),y=n.useMemo(()=>b?Math.abs(Number(s)):0,[s,b]),w=n.useCallback(e=>null!=g?e.toFixed(g):e.toString(),[g]),[k,F=""]=w(y).split("."),M=x&&(null==k?void 0:k.length)===1?"0"+k:k,[S="",C=""]=w(N.current).split("."),R=x&&1===S.length?"0"+S:S,D=n.useMemo(()=>{var e,t,r;return R.length>(null!=(e=null==M?void 0:M.length)?e:0)?R.slice(-(null!=(t=null==M?void 0:M.length)?t:0)):R.padStart(null!=(r=null==M?void 0:M.length)?r:0,"0")},[R,M]),L=n.useMemo(()=>F?C.length>F.length?C.slice(0,F.length):C.padEnd(F.length,"0"):"",[C,F]);n.useEffect(()=>{b&&(N.current=y)},[y,b]);let A=null!=(t=null==M?void 0:M.length)?t:0,_=n.useMemo(()=>Array.from({length:A},(e,t)=>Math.pow(10,A-t-1)),[A]),P=n.useMemo(()=>F?Array.from({length:F.length},(e,t)=>Math.pow(10,F.length-t-1)):[],[F]),T=F?parseInt(F,10):0,O=L?parseInt(L,10):0;return(0,a.jsxs)("span",{ref:j,"data-slot":"sliding-number",className:(0,d.cn)("flex items-center",l),...f,children:[b&&0>Number(s)&&(0,a.jsx)("span",{className:"mr-1",children:"-"}),_.map(e=>(0,a.jsx)(m,{prevValue:parseInt(D,10),value:parseInt(null!=M?M:"0",10),place:e,transition:p},"int-".concat(e))),F&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:h}),P.map(e=>(0,a.jsx)(m,{prevValue:O,value:T,place:e,transition:p},"dec-".concat(e)))]})]})}}},e=>{e.O(0,[619,775,365,441,255,358],()=>e(e.s=49086)),_N_E=e.O()}]);